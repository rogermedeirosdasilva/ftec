!function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n(require("jquery")):n(jQuery)}(function(n){function tt(n,t){return n.parsleyAdaptedCallback||(n.parsleyAdaptedCallback=function(){var i=Array.prototype.slice.call(arguments,0);i.unshift(this);n.apply(t||nt,i)}),n.parsleyAdaptedCallback}function f(n){return n.lastIndexOf(k,0)===0?n.substr(k.length):n}var y,l,p,r,w,g,i,o,b,s,nt,u,k,h,it;"undefined"==typeof n&&"undefined"!=typeof jQuery&&(n=window.jQuery);var rt=1,a={},t={attr:function(n,t,i){var r,f,e=new RegExp("^"+t,"i"),u;if("undefined"==typeof i)i={};else for(u in i)i.hasOwnProperty(u)&&delete i[u];if("undefined"==typeof n||"undefined"==typeof n[0])return i;for(f=n[0].attributes,u=f.length;u--;)r=f[u],r&&r.specified&&e.test(r.name)&&(i[this.camelize(r.name.slice(t.length))]=this.deserializeValue(r.value));return i},checkAttr:function(n,t,i){return n.is("["+t+i+"]")},setAttr:function(n,t,i,r){n[0].setAttribute(this.dasherize(t+i),String(r))},generateID:function(){return""+rt++},deserializeValue:function(t){var i;try{return t?t=="true"||(t=="false"?!1:t=="null"?null:isNaN(i=Number(t))?/^[\[\{]/.test(t)?n.parseJSON(t):t:i):t}catch(r){return t}},camelize:function(n){return n.replace(/-+(.)?/g,function(n,t){return t?t.toUpperCase():""})},dasherize:function(n){return n.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},warn:function(){window.console&&"function"==typeof window.console.warn&&window.console.warn.apply(window.console,arguments)},warnOnce:function(n){a[n]||(a[n]=!0,this.warn.apply(this,arguments))},_resetWarnings:function(){a={}},trimString:function(n){return n.replace(/^\s+|\s+$/g,"")},objectCreate:Object.create||function(){var n=function(){};return function(t){if(arguments.length>1)throw Error("Second argument not supported");if(typeof t!="object")throw TypeError("Argument must be an object");n.prototype=t;return n.prototype=null,{}}}()},d={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,multiple:null,group:null,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"><\/ul>',errorTemplate:"<li><\/li>"},e=function(){};e.prototype={asyncSupport:!0,actualizeOptions:function(){return t.attr(this.$element,this.options.namespace,this.domOptions),this.parent&&this.parent.actualizeOptions&&this.parent.actualizeOptions(),this},_resetOptions:function(n){this.domOptions=t.objectCreate(this.parent.options);this.options=t.objectCreate(this.domOptions);for(var i in n)n.hasOwnProperty(i)&&(this.options[i]=n[i]);this.actualizeOptions()},_listeners:null,on:function(n,t){this._listeners=this._listeners||{};var i=this._listeners[n]=this._listeners[n]||[];return i.push(t),this},subscribe:function(t,i){n.listenTo(this,t.toLowerCase(),i)},off:function(n,t){var i=this._listeners&&this._listeners[n],r;if(i)if(t)for(r=i.length;r--;)i[r]===t&&i.splice(r,1);else delete this._listeners[n];return this},unsubscribe:function(t){n.unsubscribeTo(this,t.toLowerCase())},trigger:function(n,t){var i,r,u;if(t=t||this,i=this._listeners&&this._listeners[n],i)for(u=i.length;u--;)if(r=i[u].call(t,t),r===!1)return r;return this.parent?this.parent.trigger(n,t):!0},reset:function(){if("ParsleyForm"!==this.__class__)return this._trigger("reset");for(var n=0;n<this.fields.length;n++)this.fields[n]._trigger("reset");this._trigger("reset")},destroy:function(){if("ParsleyForm"!==this.__class__){this.$element.removeData("Parsley");this.$element.removeData("ParsleyFieldMultiple");this._trigger("destroy");return}for(var n=0;n<this.fields.length;n++)this.fields[n].destroy();this.$element.removeData("Parsley");this._trigger("destroy")},asyncIsValid:function(){return t.warnOnce("asyncIsValid is deprecated; please use whenIsValid instead"),this.whenValid.apply(this,arguments)},_findRelatedMultiple:function(){return this.parent.$element.find("["+this.options.namespace+'multiple="'+this.options.multiple+'"]')}};var ut={string:function(n){return n},integer:function(n){if(isNaN(n))throw'Requirement is not an integer: "'+n+'"';return parseInt(n,10)},number:function(n){if(isNaN(n))throw'Requirement is not a number: "'+n+'"';return parseFloat(n)},reference:function(t){var i=n(t);if(i.length===0)throw'No such reference: "'+t+'"';return i},boolean:function(n){return n!=="false"},object:function(n){return t.deserializeValue(n)},regexp:function(n){var t="";return!/^\/.*\/(?:[gimy]*)$/.test(n)||(t=n.replace(/.*\/([gimy]*)$/,"$1"),n=n.replace(new RegExp("^/(.*?)/"+t+"$"),"$1")),new RegExp(n,t)}},ft=function(n,i){var u=n.match(/^\s*\[(.*)\]\s*$/),r;if(!u)throw'Requirement is not an array: "'+n+'"';if(r=u[1].split(",").map(t.trimString),r.length!==i)throw"Requirement has "+r.length+" values when "+i+" are needed";return r},c=function(n,t){var i=ut[n||"string"];if(!i)throw'Unknown requirement specification: "'+n+'"';return i(t)},et=function(n,t,i){var f=null,e={},r,u;for(r in n)r?(u=i(r),"string"==typeof u&&(u=c(n[r],u)),e[r]=u):f=c(n[r],t);return[f,e]},v=function(t){n.extend(!0,this,t)};return v.prototype={validate:function(t,i){if(this.fn)return arguments.length>3&&(i=[].slice.call(arguments,1,-1)),this.fn.call(this,t,i);if(n.isArray(t)){if(!this.validateMultiple)throw"Validator `"+this.name+"` does not handle multiple values";return this.validateMultiple.apply(this,arguments)}if(this.validateNumber)return isNaN(t)?!1:(t=parseFloat(t),this.validateNumber.apply(this,arguments));if(this.validateString)return this.validateString.apply(this,arguments);throw"Validator `"+this.name+"` only handles multiple values";},parseRequirements:function(t,i){var r,f,u;if("string"!=typeof t)return n.isArray(t)?t:[t];if(r=this.requirementType,n.isArray(r)){for(f=ft(t,r.length),u=0;u<f.length;u++)f[u]=c(r[u],f[u]);return f}return n.isPlainObject(r)?et(r,t,i):[c(r,t)]},requirementType:"string",priority:2},y=function(n,t){this.__class__="ParsleyValidatorRegistry";this.locale="en";this.init(n||{},t||{})},l={email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/,integer:/^-?\d+$/,digits:/^\d+$/,alphanum:/^\w+$/i,url:new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i")},l.range=l.number,y.prototype={init:function(t,i){this.catalog=i;this.validators=n.extend({},this.validators);for(var r in t)this.addValidator(r,t[r].fn,t[r].priority);window.Parsley.trigger("parsley:validator:init")},setLocale:function(n){if("undefined"==typeof this.catalog[n])throw new Error(n+" is not available in the catalog");return this.locale=n,this},addCatalog:function(n,t,i){return("object"==typeof t&&(this.catalog[n]=t),!0===i)?this.setLocale(n):this},addMessage:function(n,t,i){return"undefined"==typeof this.catalog[n]&&(this.catalog[n]={}),this.catalog[n][t.toLowerCase()]=i,this},addValidator:function(n){if(this.validators[n])t.warn('Validator "'+n+'" is already defined.');else if(d.hasOwnProperty(n)){t.warn('"'+n+'" is a restricted keyword and is not a valid validator name.');return}return this._setValidator.apply(this,arguments)},updateValidator:function(n){return this.validators[n]?this._setValidator(this,arguments):(t.warn('Validator "'+n+'" is not already defined.'),this.addValidator.apply(this,arguments))},removeValidator:function(n){return this.validators[n]||t.warn('Validator "'+n+'" is not defined.'),delete this.validators[n],this},_setValidator:function(n,t,i){"object"!=typeof t&&(t={fn:t,priority:i});t.validate||(t=new v(t));this.validators[n]=t;for(var r in t.messages||{})this.addMessage(r,n,t.messages[r]);return this},getErrorMessage:function(n){var t,i;return"type"===n.name?(i=this.catalog[this.locale][n.name]||{},t=i[n.requirements]):t=this.formatMessage(this.catalog[this.locale][n.name],n.requirements),t||this.catalog[this.locale].defaultMessage||this.catalog.en.defaultMessage},formatMessage:function(n,t){if("object"==typeof t){for(var i in t)n=this.formatMessage(n,t[i]);return n}return"string"==typeof n?n.replace(new RegExp("%s","i"),t):""},validators:{notblank:{validateString:function(n){return/\S/.test(n)},priority:2},required:{validateMultiple:function(n){return n.length>0},validateString:function(n){return/\S/.test(n)},priority:512},type:{validateString:function(n,t){var i=l[t];if(!i)throw new Error("validator type `"+t+"` is not supported");return i.test(n)},priority:256},pattern:{validateString:function(n,t){return t.test(n)},requirementType:"regexp",priority:64},minlength:{validateString:function(n,t){return n.length>=t},requirementType:"integer",priority:30},maxlength:{validateString:function(n,t){return n.length<=t},requirementType:"integer",priority:30},length:{validateString:function(n,t,i){return n.length>=t&&n.length<=i},requirementType:["integer","integer"],priority:30},mincheck:{validateMultiple:function(n,t){return n.length>=t},requirementType:"integer",priority:30},maxcheck:{validateMultiple:function(n,t){return n.length<=t},requirementType:"integer",priority:30},check:{validateMultiple:function(n,t,i){return n.length>=t&&n.length<=i},requirementType:["integer","integer"],priority:30},min:{validateNumber:function(n,t){return n>=t},requirementType:"number",priority:30},max:{validateNumber:function(n,t){return n<=t},requirementType:"number",priority:30},range:{validateNumber:function(n,t,i){return n>=t&&n<=i},requirementType:["number","number"],priority:30},equalto:{validateString:function(t,i){var r=n(i);return r.length?t===r.val():t===i},priority:256}}},p=function(){this.__class__="ParsleyUI"},p.prototype={listen:function(){var n=this;window.Parsley.on("form:init",function(){n.setupForm(this)}).on("field:init",function(){n.setupField(this)}).on("field:validated",function(){n.reflow(this)}).on("form:validated",function(){n.focus(this)}).on("field:reset",function(){n.reset(this)}).on("form:destroy",function(){n.destroy(this)}).on("field:destroy",function(){n.destroy(this)});return this},reflow:function(n){if("undefined"!=typeof n._ui&&!1!==n._ui.active){var t=this._diff(n.validationResult,n._ui.lastValidationResult);n._ui.lastValidationResult=n.validationResult;n._ui.validatedOnce=!0;this.manageStatusClass(n);this.manageErrorsMessages(n,t);this.actualizeTriggers(n);(t.kept.length||t.added.length)&&!0!==n._ui.failedOnce&&this.manageFailingFieldTrigger(n)}},getErrorsMessages:function(n){var i,t;if(!0===n.validationResult)return[];for(i=[],t=0;t<n.validationResult.length;t++)i.push(this._getErrorMessage(n,n.validationResult[t].assert));return i},manageStatusClass:function(n){n.hasConstraints()&&n.needsValidation()&&!0===n.validationResult?this._successClass(n):n.validationResult.length>0?this._errorClass(n):this._resetClass(n)},manageErrorsMessages:function(t,i){if("undefined"==typeof t.options.errorsMessagesDisabled){if("undefined"!=typeof t.options.errorMessage)return i.added.length||i.kept.length?(this._insertErrorWrapper(t),0===t._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&t._ui.$errorsWrapper.append(n(t.options.errorTemplate).addClass("parsley-custom-error-message")),t._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(t.options.errorMessage)):t._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove();for(var r=0;r<i.removed.length;r++)this.removeError(t,i.removed[r].assert.name,!0);for(r=0;r<i.added.length;r++)this.addError(t,i.added[r].assert.name,undefined,i.added[r].assert,!0);for(r=0;r<i.kept.length;r++)this.updateError(t,i.kept[r].assert.name,undefined,i.kept[r].assert,!0)}},addError:function(t,i,r,u,f){this._insertErrorWrapper(t);t._ui.$errorsWrapper.addClass("filled").append(n(t.options.errorTemplate).addClass("parsley-"+i).html(r||this._getErrorMessage(t,u)));!0!==f&&this._errorClass(t)},updateError:function(n,t,i,r,u){n._ui.$errorsWrapper.addClass("filled").find(".parsley-"+t).html(i||this._getErrorMessage(n,r));!0!==u&&this._errorClass(n)},removeError:function(n,t,i){n._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+t).remove();!0!==i&&this.manageStatusClass(n)},focus:function(n){var i,t;if(n._focusedField=null,!0===n.validationResult||"none"===n.options.focus)return null;for(i=0;i<n.fields.length;i++)if(t=n.fields[i],!0!==t.validationResult&&t.validationResult.length>0&&"undefined"==typeof t.options.noFocus&&(n._focusedField=t.$element,"first"===n.options.focus))break;return null===n._focusedField?null:n._focusedField.focus()},_getErrorMessage:function(n,t){var i=t.name+"Message";return"undefined"!=typeof n.options[i]?window.Parsley.formatMessage(n.options[i],t.requirements):window.Parsley.getErrorMessage(t)},_diff:function(n,t,i){for(var f,u,e=[],o=[],r=0;r<n.length;r++){for(f=!1,u=0;u<t.length;u++)if(n[r].assert.name===t[u].assert.name){f=!0;break}f?o.push(n[r]):e.push(n[r])}return{kept:o,added:e,removed:i?[]:this._diff(t,n,!0).added}},setupForm:function(t){t.$element.on("submit.Parsley",!1,n.proxy(t.onSubmitValidate,t));!1!==t.options.uiEnabled&&t.$element.attr("novalidate","")},setupField:function(t){var i={active:!1};!1!==t.options.uiEnabled&&(i.active=!0,t.$element.attr(t.options.namespace+"id",t.__id__),i.$errorClassHandler=this._manageClassHandler(t),i.errorsWrapperId="parsley-id-"+(t.options.multiple?"multiple-"+t.options.multiple:t.__id__),i.$errorsWrapper=n(t.options.errorsWrapper).attr("id",i.errorsWrapperId),i.lastValidationResult=[],i.validatedOnce=!1,i.validationInformationVisible=!1,t._ui=i,this.actualizeTriggers(t))},_manageClassHandler:function(t){if("string"==typeof t.options.classHandler&&n(t.options.classHandler).length)return n(t.options.classHandler);var i=t.options.classHandler(t);return"undefined"!=typeof i&&i.length?i:!t.options.multiple||t.$element.is("select")?t.$element:t.$element.parent()},_insertErrorWrapper:function(i){var r,u;if(0!==i._ui.$errorsWrapper.parent().length)return i._ui.$errorsWrapper.parent();if("string"==typeof i.options.errorsContainer){if(n(i.options.errorsContainer).length)return n(i.options.errorsContainer).append(i._ui.$errorsWrapper);t.warn("The errors container `"+i.options.errorsContainer+"` does not exist in DOM")}else"function"==typeof i.options.errorsContainer&&(r=i.options.errorsContainer(i));return"undefined"!=typeof r&&r.length?r.append(i._ui.$errorsWrapper):(u=i.$element,i.options.multiple&&(u=u.parent()),u.after(i._ui.$errorsWrapper))},actualizeTriggers:function(t){var i=t.$element,r;if((t.options.multiple&&(i=n("["+t.options.namespace+'multiple="'+t.options.multiple+'"]')),i.off(".Parsley"),!1!==t.options.trigger)&&(r=t.options.trigger.replace(/^\s+/g,"").replace(/\s+$/g,""),""!==r))i.on(r.split(" ").join(".Parsley ")+".Parsley",n.proxy("function"==typeof t.eventValidate?t.eventValidate:this.eventValidate,t))},eventValidate:function(n){new RegExp("key").test(n.type)&&!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold||(this._ui.validatedOnce=!0,this.validate())},manageFailingFieldTrigger:function(t){if(t._ui.failedOnce=!0,t.options.multiple&&n("["+t.options.namespace+'multiple="'+t.options.multiple+'"]').each(function(){if(!new RegExp("change","i").test(n(this).parsley().options.trigger||""))return n(this).on("change.ParsleyFailedOnce",!1,n.proxy(t.validate,t))}),t.$element.is("select")&&!new RegExp("change","i").test(t.options.trigger||""))return t.$element.on("change.ParsleyFailedOnce",!1,n.proxy(t.validate,t));if(!new RegExp("keyup","i").test(t.options.trigger||""))return t.$element.on("keyup.ParsleyFailedOnce",!1,n.proxy(t.validate,t))},reset:function(n){(this.actualizeTriggers(n),n.$element.off(".ParsleyFailedOnce"),"undefined"!=typeof n._ui)&&"ParsleyForm"!==n.__class__&&(n._ui.$errorsWrapper.removeClass("filled").children().remove(),this._resetClass(n),n._ui.validatedOnce=!1,n._ui.lastValidationResult=[],n._ui.validationInformationVisible=!1,n._ui.failedOnce=!1)},destroy:function(n){(this.reset(n),"ParsleyForm"!==n.__class__)&&("undefined"!=typeof n._ui&&n._ui.$errorsWrapper.remove(),delete n._ui)},_successClass:function(n){n._ui.validationInformationVisible=!0;n._ui.$errorClassHandler.removeClass(n.options.errorClass).addClass(n.options.successClass)},_errorClass:function(n){n._ui.validationInformationVisible=!0;n._ui.$errorClassHandler.removeClass(n.options.successClass).addClass(n.options.errorClass)},_resetClass:function(n){n._ui.$errorClassHandler.removeClass(n.options.successClass).removeClass(n.options.errorClass)}},r=function(i,r,u){this.__class__="ParsleyForm";this.__id__=t.generateID();this.$element=n(i);this.domOptions=r;this.options=u;this.parent=window.Parsley;this.fields=[];this.validationResult=null},o={pending:null,resolved:!0,rejected:!1},r.prototype={onSubmitValidate:function(n){var t=this;if(!0!==n.parsley)return n.stopImmediatePropagation(),n.preventDefault(),this.whenValidate(undefined,undefined,n).done(function(){t._submit()}).always(function(){t._submitSource=null}),this},_submit:function(){!1!==this._trigger("submit")&&(this.$element.find(".parsley_synthetic_submit_button").remove(),this._submitSource&&n('<input class=".parsley_synthetic_submit_button" type="hidden">').attr("name",this._submitSource.name).attr("value",this._submitSource.value).appendTo(this.$element),this.$element.trigger(n.extend(n.Event("submit"),{parsley:!0})))},validate:function(n,t,i){return o[this.whenValidate(n,t,i).state()]},whenValidate:function(t,i,r){var u=this,f;return this.submitEvent=r,this.validationResult=!0,this._trigger("validate"),this._refreshFields(),f=this._withoutReactualizingFormOptions(function(){return n.map(this.fields,function(n){if(!t||u._isFieldInGroup(n,t))return n.whenValidate(i)})}),n.when.apply(n,f).done(function(){u._trigger("success")}).fail(function(){u.validationResult=!1;u._trigger("error")}).always(function(){u._trigger("validated")})},isValid:function(n,t){return o[this.whenValid(n,t).state()]},whenValid:function(t,i){var u=this,r;return this._refreshFields(),r=this._withoutReactualizingFormOptions(function(){return n.map(this.fields,function(n){if(!t||u._isFieldInGroup(n,t))return n.whenValid(i)})}),n.when.apply(n,r)},_isFieldInGroup:function(t,i){return n.isArray(t.options.group)?-1!==n.inArray(i,t.options.group):t.options.group===i},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var t=this,i=this.fields;return this.fields=[],this.fieldsMappedById={},this._withoutReactualizingFormOptions(function(){this.$element.find(this.options.inputs).not(this.options.excluded).each(function(){var n=new h.Factory(this,{},t);("ParsleyField"===n.__class__||"ParsleyFieldMultiple"===n.__class__)&&!0!==n.options.excluded&&"undefined"==typeof t.fieldsMappedById[n.__class__+"-"+n.__id__]&&(t.fieldsMappedById[n.__class__+"-"+n.__id__]=n,t.fields.push(n))});n(i).not(t.fields).each(function(){this._trigger("reset")})}),this},_withoutReactualizingFormOptions:function(n){var i=this.actualizeOptions,t;return this.actualizeOptions=function(){return this},t=n.call(this),this.actualizeOptions=i,t},_trigger:function(n){return n="form:"+n,this.trigger.apply(this,arguments)}},w=function(t,i,r,u,f){if(!new RegExp("ParsleyField").test(t.__class__))throw new Error("ParsleyField or ParsleyFieldMultiple instance expected");var o=window.Parsley._validatorRegistry.validators[i],e=new v(o);n.extend(this,{validator:e,name:i,requirements:r,priority:u||t.options[i+"Priority"]||e.priority,isDomConstraint:!0===f});this._parseRequirements(t.options)},g=function(n){var t=n[0].toUpperCase();return t+n.slice(1)},w.prototype={validate:function(n,t){var i=this.requirementList.slice(0);return i.unshift(n),i.push(t),this.validator.validate.apply(this.validator,i)},_parseRequirements:function(n){var t=this;this.requirementList=this.validator.parseRequirements(this.requirements,function(i){return n[t.name+g(i)]})}},i=function(i,r,u,f){this.__class__="ParsleyField";this.__id__=t.generateID();this.$element=n(i);"undefined"!=typeof f&&(this.parent=f);this.options=u;this.domOptions=r;this.constraints=[];this.constraintsByName={};this.validationResult=[];this._bindConstraints()},o={pending:null,resolved:!0,rejected:!1},i.prototype={validate:function(n){var t=this.whenValidate(n);switch(t.state()){case"pending":return null;case"resolved":return!0;case"rejected":return this.validationResult}},whenValidate:function(n){var t=this;return this.value=this.getValue(),this._trigger("validate"),this.whenValid(n,this.value).done(function(){t._trigger("success")}).fail(function(){t._trigger("error")}).always(function(){t._trigger("validated")})},hasConstraints:function(){return 0!==this.constraints.length},needsValidation:function(n){return("undefined"==typeof n&&(n=this.getValue()),!n.length&&!this._isRequired()&&"undefined"==typeof this.options.validateIfEmpty)?!1:!0},isValid:function(n,t){return o[this.whenValid(n,t).state()]},whenValid:function(t,i){if((this.refreshConstraints(),this.validationResult=!0,!this.hasConstraints())||(("undefined"==typeof i||null===i)&&(i=this.getValue()),!this.needsValidation(i)&&!0!==t))return n.when();var u=this._getGroupedConstraints(),r=[],f=this;return n.each(u,function(t,u){var e=n.when.apply(n,n.map(u,n.proxy(f,"_validateConstraint",i)));return r.push(e),e.state()==="rejected"?!1:void 0}),n.when.apply(n,r)},_validateConstraint:function(t,i){var r=this,u=i.validate(t,this);return!1===u&&(u=n.Deferred().reject()),n.when(u).fail(function(){!0===r.validationResult&&(r.validationResult=[]);r.validationResult.push({assert:i})})},getValue:function(){var n;return(n="function"==typeof this.options.value?this.options.value(this):"undefined"!=typeof this.options.value?this.options.value:this.$element.val(),"undefined"==typeof n||null===n)?"":this._handleWhitespace(n)},refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},addConstraint:function(n,t,i,r){if(window.Parsley._validatorRegistry.validators[n]){var u=new w(this,n,t,i,r);"undefined"!==this.constraintsByName[u.name]&&this.removeConstraint(u.name);this.constraints.push(u);this.constraintsByName[u.name]=u}return this},removeConstraint:function(n){for(var t=0;t<this.constraints.length;t++)if(n===this.constraints[t].name){this.constraints.splice(t,1);break}return delete this.constraintsByName[n],this},updateConstraint:function(n,t,i){return this.removeConstraint(n).addConstraint(n,t,i)},_bindConstraints:function(){for(var t,i=[],r={},n=0;n<this.constraints.length;n++)!1===this.constraints[n].isDomConstraint&&(i.push(this.constraints[n]),r[this.constraints[n].name]=this.constraints[n]);this.constraints=i;this.constraintsByName=r;for(t in this.options)this.addConstraint(t,this.options[t],undefined,!0);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.attr("required"))&&this.addConstraint("required",!0,undefined,!0);"string"==typeof this.$element.attr("pattern")&&this.addConstraint("pattern",this.$element.attr("pattern"),undefined,!0);"undefined"!=typeof this.$element.attr("min")&&"undefined"!=typeof this.$element.attr("max")?this.addConstraint("range",[this.$element.attr("min"),this.$element.attr("max")],undefined,!0):"undefined"!=typeof this.$element.attr("min")?this.addConstraint("min",this.$element.attr("min"),undefined,!0):"undefined"!=typeof this.$element.attr("max")&&this.addConstraint("max",this.$element.attr("max"),undefined,!0);"undefined"!=typeof this.$element.attr("minlength")&&"undefined"!=typeof this.$element.attr("maxlength")?this.addConstraint("length",[this.$element.attr("minlength"),this.$element.attr("maxlength")],undefined,!0):"undefined"!=typeof this.$element.attr("minlength")?this.addConstraint("minlength",this.$element.attr("minlength"),undefined,!0):"undefined"!=typeof this.$element.attr("maxlength")&&this.addConstraint("maxlength",this.$element.attr("maxlength"),undefined,!0);var n=this.$element.attr("type");return"undefined"==typeof n?this:"number"===n?"undefined"==typeof this.$element.attr("step")||0==parseFloat(this.$element.attr("step"))%1?this.addConstraint("type","integer",undefined,!0):this.addConstraint("type","number",undefined,!0):/^(email|url|range)$/i.test(n)?this.addConstraint("type",n,undefined,!0):this},_isRequired:function(){return"undefined"==typeof this.constraintsByName.required?!1:!1!==this.constraintsByName.required.requirements},_trigger:function(n){return n="field:"+n,this.trigger.apply(this,arguments)},_handleWhitespace:function(n){return!0===this.options.trimValue&&t.warnOnce('data-parsley-trim-value="true" is deprecated, please use data-parsley-whitespace="trim"'),"squish"===this.options.whitespace&&(n=n.replace(/\s{2,}/g," ")),("trim"===this.options.whitespace||"squish"===this.options.whitespace||!0===this.options.trimValue)&&(n=t.trimString(n)),n},_getGroupedConstraints:function(){var t,i,n,r;if(!1===this.options.priorityEnabled)return[this.constraints];for(t=[],i={},n=0;n<this.constraints.length;n++)r=this.constraints[n].priority,i[r]||t.push(i[r]=[]),i[r].push(this.constraints[n]);return t.sort(function(n,t){return t[0].priority-n[0].priority}),t}},b=function(){this.__class__="ParsleyFieldMultiple"},b.prototype={addElement:function(n){return this.$elements.push(n),this},refreshConstraints:function(){var i,r,t;if(this.constraints=[],this.$element.is("select"))return this.actualizeOptions()._bindConstraints(),this;for(r=0;r<this.$elements.length;r++){if(!n("html").has(this.$elements[r]).length){this.$elements.splice(r,1);continue}for(i=this.$elements[r].data("ParsleyFieldMultiple").refreshConstraints().constraints,t=0;t<i.length;t++)this.addConstraint(i[t].name,i[t].requirements,i[t].priority,i[t].isDomConstraint)}return this},getValue:function(){if("undefined"!=typeof this.options.value)return this.options.value;if(this.$element.is("input[type=radio]"))return this._findRelatedMultiple().filter(":checked").val()||"";if(this.$element.is("input[type=checkbox]")){var t=[];return this._findRelatedMultiple().filter(":checked").each(function(){t.push(n(this).val())}),t}return this.$element.is("select")&&null===this.$element.val()?[]:this.$element.val()},_init:function(){return this.$elements=[this.$element],this}},s=function(t,i,r){this.$element=n(t);var u=this.$element.data("Parsley");if(u)return"undefined"!=typeof r&&u.parent===window.Parsley&&(u.parent=r,u._resetOptions(u.options)),u;if(!this.$element.length)throw new Error("You must bind Parsley on an existing element.");if("undefined"!=typeof r&&"ParsleyForm"!==r.__class__)throw new Error("Parent instance must be a ParsleyForm instance");return this.parent=r||window.Parsley,this.init(i)},s.prototype={init:function(n){return(this.__class__="Parsley",this.__version__="2.2.0-rc1",this.__id__=t.generateID(),this._resetOptions(n),this.$element.is("form")||t.checkAttr(this.$element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs))?this.bind("parsleyForm"):this.isMultiple()?this.handleMultiple():this.bind("parsleyField")},isMultiple:function(){return this.$element.is("input[type=radio], input[type=checkbox]")||this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple")},handleMultiple:function(){var e=this,u,i,f,r;if(this.options.multiple||("undefined"!=typeof this.$element.attr("name")&&this.$element.attr("name").length?this.options.multiple=u=this.$element.attr("name"):"undefined"!=typeof this.$element.attr("id")&&this.$element.attr("id").length&&(this.options.multiple=this.$element.attr("id"))),this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple"))return this.options.multiple=this.options.multiple||this.__id__,this.bind("parsleyFieldMultiple");if(!this.options.multiple)return t.warn("To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;for(this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\{|\}|\$)/g,""),"undefined"!=typeof u&&n('input[name="'+u+'"]').each(function(){n(this).is("input[type=radio], input[type=checkbox]")&&n(this).attr(e.options.namespace+"multiple",e.options.multiple)}),f=this._findRelatedMultiple(),r=0;r<f.length;r++)if(i=n(f.get(r)).data("Parsley"),"undefined"!=typeof i){this.$element.data("ParsleyFieldMultiple")||i.addElement(this.$element);break}return this.bind("parsleyField",!0),i||this.bind("parsleyFieldMultiple")},bind:function(u,f){var e;switch(u){case"parsleyForm":e=n.extend(new r(this.$element,this.domOptions,this.options),window.ParsleyExtend)._bindFields();break;case"parsleyField":e=n.extend(new i(this.$element,this.domOptions,this.options,this.parent),window.ParsleyExtend);break;case"parsleyFieldMultiple":e=n.extend(new i(this.$element,this.domOptions,this.options,this.parent),new b,window.ParsleyExtend)._init();break;default:throw new Error(u+"is not a supported Parsley type");}return(this.options.multiple&&t.setAttr(this.$element,this.options.namespace,"multiple",this.options.multiple),"undefined"!=typeof f)?(this.$element.data("ParsleyFieldMultiple",e),e):(this.$element.data("Parsley",e),e._trigger("init"),e)}},nt=n({}),u=function(){t.warnOnce("Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley")},k="parsley:",n.listen=function(n,t){var i;if(u(),"object"==typeof arguments[1]&&"function"==typeof arguments[2]&&(i=arguments[1],t=arguments[2]),"function"!=typeof arguments[1])throw new Error("Wrong parameters");window.Parsley.on(f(n),tt(t,i))},n.listenTo=function(n,t,e){if(u(),!(n instanceof i)&&!(n instanceof r))throw new Error("Must give Parsley instance");if("string"!=typeof t||"function"!=typeof e)throw new Error("Wrong parameters");n.on(f(t),tt(e))},n.unsubscribe=function(n,t){if(u(),"string"!=typeof n||"function"!=typeof t)throw new Error("Wrong arguments");window.Parsley.off(f(n),t.parsleyAdaptedCallback)},n.unsubscribeTo=function(n,t){if(u(),!(n instanceof i)&&!(n instanceof r))throw new Error("Must give Parsley instance");n.off(f(t))},n.unsubscribeAll=function(t){u();window.Parsley.off(f(t));n("form,input,textarea,select").each(function(){var i=n(this).data("Parsley");i&&i.off(f(t))})},n.emit=function(n,t){u();var e=t instanceof i||t instanceof r,o=Array.prototype.slice.call(arguments,e?2:1);o.unshift(f(n));e||(t=window.Parsley);t.trigger.apply(t,o)},window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.en=jQuery.extend(window.ParsleyConfig.i18n.en||{},{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or fewer.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("en",window.ParsleyConfig.i18n.en,!0),h=n.extend(new e,{$element:n(document),actualizeOptions:null,_resetOptions:null,Factory:s,version:"2.2.0-rc1"}),n.extend(i.prototype,e.prototype),n.extend(r.prototype,e.prototype),n.extend(s.prototype,e.prototype),n.fn.parsley=n.fn.psly=function(i){if(this.length>1){var r=[];return this.each(function(){r.push(n(this).parsley(i))}),r}if(!n(this).length){t.warn("You must bind Parsley on an existing element.");return}return new s(this,i)},"undefined"==typeof ParsleyExtend&&(window.ParsleyExtend={}),h.options=n.extend(t.objectCreate(d),window.ParsleyConfig),window.ParsleyConfig=h.options,window.Parsley=window.psly=h,window.ParsleyUtils=t,it=window.Parsley._validatorRegistry=new y(window.ParsleyConfig.validators,window.ParsleyConfig.i18n),window.ParsleyValidator={},n.each("setLocale addCatalog addMessage getErrorMessage formatMessage addValidator updateValidator removeValidator".split(" "),function(i,r){window.Parsley[r]=n.proxy(it,r);window.ParsleyValidator[r]=function(){return t.warnOnce("Accessing the method `"+r+"` through ParsleyValidator is deprecated. Simply call `window.Parsley."+r+"(...)`"),window.Parsley[r].apply(window.Parsley,arguments)}}),window.ParsleyUI="function"==typeof window.ParsleyConfig.ParsleyUI?(new window.ParsleyConfig.ParsleyUI).listen():(new p).listen(),!1!==window.ParsleyConfig.autoBind&&n(function(){n("[data-parsley-validate]").length&&n("[data-parsley-validate]").parsley()}),window.Parsley});